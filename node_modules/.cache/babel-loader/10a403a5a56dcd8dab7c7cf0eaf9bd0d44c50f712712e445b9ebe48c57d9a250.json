{"ast":null,"code":"import _defineProperty from\"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _objectSpread from\"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from\"react\";import Profile from\"./Profile\";import{connect}from\"react-redux\";import{setUser,setUserProfile,updateUser,getStatus,updateStatus}from\"../../redux/profile-reducer\";import{useLocation,useNavigate,useParams}from\"react-router-dom\";import{setIsFetching}from\"../../redux/users-reducer\";import{compose}from\"redux\";import{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";function withRouter(Component){function ComponentWithRouterProp(props){var location=useLocation();var navigate=useNavigate();var params=useParams();useEffect(function(){if(!props.isAuth){navigate(\"/login\");}},[props.isAuth,navigate]);return/*#__PURE__*/_jsx(Component,_objectSpread(_objectSpread({},props),{},{router:{location:location,navigate:navigate,params:params}}));}return ComponentWithRouterProp;}var ProfileContainer=/*#__PURE__*/function(_React$Component){_inherits(ProfileContainer,_React$Component);var _super=_createSuper(ProfileContainer);function ProfileContainer(){_classCallCheck(this,ProfileContainer);return _super.apply(this,arguments);}_createClass(ProfileContainer,[{key:\"componentDidMount\",value:function componentDidMount(){var userId=this.props.router.params.userId;this.props.setUser(userId);this.props.getStatus(userId);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var prevUserId=prevProps.router.params.userId;var userId=this.props.router.params.userId;if(!userId&&this.props.isAuth){userId=this.props.authorizedUserId;}this.props.updateUser(prevUserId,userId);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Profile,_objectSpread(_objectSpread({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}))});}}]);return ProfileContainer;}(React.Component);var mapStateToProps=function mapStateToProps(state){return _defineProperty({profile:state.profilePage.profile,isAuth:state.auth.isAuth,status:state.profilePage.status,authorizedUserId:state.auth.userId},\"isAuth\",state.auth.isAuth);};export default compose(connect(mapStateToProps,{setUserProfile:setUserProfile,setIsFetching:setIsFetching,setUser:setUser,updateUser:updateUser,getStatus:getStatus,updateStatus:updateStatus}),withRouter)(ProfileContainer);","map":{"version":3,"names":["React","Profile","connect","setUser","setUserProfile","updateUser","getStatus","updateStatus","useLocation","useNavigate","useParams","setIsFetching","compose","useEffect","jsx","_jsx","withRouter","Component","ComponentWithRouterProp","props","location","navigate","params","isAuth","_objectSpread","router","ProfileContainer","_React$Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","componentDidMount","userId","componentDidUpdate","prevProps","prevUserId","authorizedUserId","render","children","profile","status","mapStateToProps","state","_defineProperty","profilePage","auth"],"sources":["/Users/jestex/Documents/React/Projects/01/my-app/src/components/Profile/ProfileContainer.jsx"],"sourcesContent":["import React from \"react\";\nimport Profile from \"./Profile\";\nimport { connect } from \"react-redux\";\nimport {\n  setUser,\n  setUserProfile,\n  updateUser,\n  getStatus,\n  updateStatus\n} from \"../../redux/profile-reducer\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { setIsFetching } from \"../../redux/users-reducer\";\nimport { compose } from \"redux\";\nimport { useEffect } from \"react\";\n\nfunction withRouter(Component) {\n  function ComponentWithRouterProp(props) {\n    let location = useLocation();\n    let navigate = useNavigate();\n    let params = useParams();\n\n    useEffect(() => {\n      if (!props.isAuth) {\n        navigate(\"/login\");\n      }\n    }, [props.isAuth, navigate]);\n\n    return (\n      <Component {...props} router={{ location, navigate, params }} />\n    );\n  }\n  return ComponentWithRouterProp;\n}\n\nclass ProfileContainer extends React.Component {\n  componentDidMount() {\n    let userId = this.props.router.params.userId;\n    this.props.setUser(userId);\n    this.props.getStatus(userId)\n  }\n\n  componentDidUpdate(prevProps) {\n    let prevUserId = prevProps.router.params.userId;\n    let userId = this.props.router.params.userId;\n    if(!userId && this.props.isAuth) {\n      userId = this.props.authorizedUserId\n    }\n    this.props.updateUser(prevUserId, userId);\n  }\n\n  render() {\n    return (\n      <div>\n        <Profile {...this.props} profile={this.props.profile} status={this.props.status} updateStatus={this.props.updateStatus}/>\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = (state) => ({\n  profile: state.profilePage.profile,\n  isAuth: state.auth.isAuth,\n  status: state.profilePage.status,\n  authorizedUserId: state.auth.userId,\n  isAuth : state.auth.isAuth\n});\n\nexport default compose (\n  connect(mapStateToProps, {\n    setUserProfile,\n    setIsFetching,\n    setUser,\n    updateUser,\n    getStatus,\n    updateStatus\n  }),\n  withRouter,\n) (ProfileContainer)\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}