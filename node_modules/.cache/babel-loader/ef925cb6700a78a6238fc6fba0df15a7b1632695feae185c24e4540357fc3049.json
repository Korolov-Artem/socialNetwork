{"ast":null,"code":"import _toConsumableArray from\"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{usersAPI}from\"../api/api\";var FOLLOW=\"FOLLOW\";var UNFOLLOW=\"UNFOLLOW\";var SET_USERS=\"SET_USERS\";var SET_CURRENT_PAGE=\"SET_CURRENT_PAGE\";var SET_TOTAL_USERS_COUNT=\"SET_TOTAL_USERS_COUNT\";var SET_IS_FETCHING=\"SET_IS_FETCHING\";var SET_IS_FOLLOWING=\"SET_IS_FOLLOWING\";var initialState={users:[],pageSize:4,totalUsersCount:0,currentPage:1,isFetching:false,followingProgress:[]};var usersReducer=function usersReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case FOLLOW:return _objectSpread(_objectSpread({},state),{},{users:state.users.map(function(u){if(u.id===action.userId){return _objectSpread(_objectSpread({},u),{},{followed:true});}return u;})});case UNFOLLOW:return _objectSpread(_objectSpread({},state),{},{users:state.users.map(function(u){if(u.id===action.userId){return _objectSpread(_objectSpread({},u),{},{followed:false});}return u;})});case SET_USERS:{return _objectSpread(_objectSpread({},state),{},{users:action.users});}case SET_CURRENT_PAGE:{return _objectSpread(_objectSpread({},state),{},{currentPage:action.currentPage});}case SET_TOTAL_USERS_COUNT:{return _objectSpread(_objectSpread({},state),{},{totalUsersCount:action.totalCount});}case SET_IS_FETCHING:{return _objectSpread(_objectSpread({},state),{},{isFetching:action.isFetching});}case SET_IS_FOLLOWING:{return _objectSpread(_objectSpread({},state),{},{followingProgress:action.isFetching?[].concat(_toConsumableArray(state.followingProgress),[action.userId]):state.followingProgress.filter(function(id){return id!==action.userId;})});}default:return state;}};export var follow=function follow(userId){return{type:FOLLOW,userId:userId};};export var unfollow=function unfollow(userId){return{type:UNFOLLOW,userId:userId};};export var setUsers=function setUsers(users){return{type:SET_USERS,users:users};};export var setCurrentPage=function setCurrentPage(currentPage){return{type:SET_CURRENT_PAGE,currentPage:currentPage};};export var setTotalUsersCount=function setTotalUsersCount(totalCount){return{type:SET_TOTAL_USERS_COUNT,totalCount:totalCount};};export var setIsFetching=function setIsFetching(isFetching){return{type:SET_IS_FETCHING,isFetching:isFetching};};export var setIsFollowing=function setIsFollowing(isFetching,userId){return{type:SET_IS_FOLLOWING,isFetching:isFetching,userId:userId};};export var getUsers=function getUsers(currentPage,pageSize){return function(dispatch){dispatch(setIsFetching(true));dispatch(setCurrentPage(currentPage));usersAPI.getUsers(currentPage,pageSize).then(function(data){dispatch(setUsers(data.items));dispatch(setTotalUsersCount(data.totalCount));dispatch(setIsFetching(false));});};};export var FollowT=function FollowT(userId){return function(dispatch){dispatch(setIsFollowing(true,userId));usersAPI.follow(userId).then(function(response){if(response.data.resultCode===0){dispatch(follow(userId));}dispatch(setIsFollowing(false,userId));});};};export var UnfollowT=function UnfollowT(userId){return function(dispatch){dispatch(setIsFollowing(true,userId));usersAPI.unfollow(userId).then(function(response){if(response.data.resultCode===0){dispatch(unfollow(userId));}dispatch(setIsFollowing(false,userId));});};};export default usersReducer;","map":{"version":3,"names":["usersAPI","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","SET_IS_FETCHING","SET_IS_FOLLOWING","initialState","users","pageSize","totalUsersCount","currentPage","isFetching","followingProgress","usersReducer","state","arguments","length","undefined","action","type","_objectSpread","map","u","id","userId","followed","totalCount","concat","_toConsumableArray","filter","follow","unfollow","setUsers","setCurrentPage","setTotalUsersCount","setIsFetching","setIsFollowing","getUsers","dispatch","then","data","items","FollowT","response","resultCode","UnfollowT"],"sources":["/Users/jestex/Documents/React/Projects/01/my-app/src/redux/users-reducer.js"],"sourcesContent":["import { usersAPI } from \"../api/api\";\n\nconst FOLLOW = \"FOLLOW\";\nconst UNFOLLOW = \"UNFOLLOW\";\nconst SET_USERS = \"SET_USERS\";\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\nconst SET_TOTAL_USERS_COUNT = \"SET_TOTAL_USERS_COUNT\";\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\nconst SET_IS_FOLLOWING = \"SET_IS_FOLLOWING\";\n\nlet initialState = {\n  users: [],\n  pageSize: 4,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: false,\n  followingProgress: [],\n};\n\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FOLLOW:\n      return {\n        ...state,\n        users: state.users.map((u) => {\n          if (u.id === action.userId) {\n            return { ...u, followed: true };\n          }\n          return u;\n        }),\n      };\n    case UNFOLLOW:\n      return {\n        ...state,\n        users: state.users.map((u) => {\n          if (u.id === action.userId) {\n            return { ...u, followed: false };\n          }\n          return u;\n        }),\n      };\n    case SET_USERS: {\n      return { ...state, users: action.users };\n    }\n    case SET_CURRENT_PAGE: {\n      return { ...state, currentPage: action.currentPage };\n    }\n    case SET_TOTAL_USERS_COUNT: {\n      return { ...state, totalUsersCount: action.totalCount };\n    }\n    case SET_IS_FETCHING: {\n      return { ...state, isFetching: action.isFetching };\n    }\n    case SET_IS_FOLLOWING: {\n      return {\n        ...state,\n        followingProgress: action.isFetching\n          ? [...state.followingProgress, action.userId]\n          : state.followingProgress.filter((id) => id !== action.userId),\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nexport const follow = (userId) => ({ type: FOLLOW, userId });\nexport const unfollow = (userId) => ({ type: UNFOLLOW, userId });\nexport const setUsers = (users) => ({ type: SET_USERS, users });\nexport const setCurrentPage = (currentPage) => ({\n  type: SET_CURRENT_PAGE,\n  currentPage,\n});\nexport const setTotalUsersCount = (totalCount) => ({\n  type: SET_TOTAL_USERS_COUNT,\n  totalCount,\n});\nexport const setIsFetching = (isFetching) => ({\n  type: SET_IS_FETCHING,\n  isFetching,\n});\nexport const setIsFollowing = (isFetching, userId) => ({\n  type: SET_IS_FOLLOWING,\n  isFetching,\n  userId,\n});\n\nexport const getUsers = (currentPage, pageSize) => {\n  return (dispatch) => {\n    dispatch(setIsFetching(true));\n    dispatch(setCurrentPage(currentPage))\n\n    usersAPI.getUsers(currentPage, pageSize).then((data) => {\n      dispatch(setUsers(data.items));\n      dispatch(setTotalUsersCount(data.totalCount));\n      dispatch(setIsFetching(false));\n    });\n  };\n};\n\nexport const FollowT = (userId) => {\n  return (dispatch) => {\n    dispatch(setIsFollowing(true, userId));\n    usersAPI.follow(userId).then((response) => {\n      if (response.data.resultCode === 0) {\n        dispatch(follow(userId));\n      }\n      dispatch(setIsFollowing(false, userId))\n    });\n  };\n};\n\nexport const UnfollowT = (userId) => {\n  return (dispatch) => {\n    dispatch(setIsFollowing(true, userId));\n    usersAPI.unfollow(userId).then((response) => {\n      if (response.data.resultCode === 0) {\n        dispatch(unfollow(userId));\n      }\n      dispatch(setIsFollowing(false, userId))\n    });\n  };\n};\n\n\n\nexport default usersReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}