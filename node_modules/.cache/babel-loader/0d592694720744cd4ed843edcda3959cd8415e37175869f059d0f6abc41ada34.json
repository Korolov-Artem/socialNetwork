{"ast":null,"code":"import _toConsumableArray from \"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectSpread from \"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { usersAPI } from \"../api/api\";\nvar FOLLOW = \"FOLLOW\";\nvar UNFOLLOW = \"UNFOLLOW\";\nvar SET_USERS = \"SET_USERS\";\nvar SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\nvar SET_TOTAL_USERS_COUNT = \"SET_TOTAL_USERS_COUNT\";\nvar SET_IS_FETCHING = \"SET_IS_FETCHING\";\nvar SET_IS_FOLLOWING = \"SET_IS_FOLLOWING\";\nvar initialState = {\n  users: [],\n  pageSize: 4,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: false,\n  followingProgress: []\n};\nvar usersReducer = function usersReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case FOLLOW:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        users: state.users.map(function (u) {\n          if (u.id === action.userId) {\n            return _objectSpread(_objectSpread({}, u), {}, {\n              followed: true\n            });\n          }\n          return u;\n        })\n      });\n    case UNFOLLOW:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        users: state.users.map(function (u) {\n          if (u.id === action.userId) {\n            return _objectSpread(_objectSpread({}, u), {}, {\n              followed: false\n            });\n          }\n          return u;\n        })\n      });\n    case SET_USERS:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          users: action.users\n        });\n      }\n    case SET_CURRENT_PAGE:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          currentPage: action.currentPage\n        });\n      }\n    case SET_TOTAL_USERS_COUNT:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          totalUsersCount: action.totalCount\n        });\n      }\n    case SET_IS_FETCHING:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          isFetching: action.isFetching\n        });\n      }\n    case SET_IS_FOLLOWING:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          followingProgress: action.isFetching ? [].concat(_toConsumableArray(state.followingProgress), [action.userId]) : state.followingProgress.filter(function (id) {\n            return id !== action.userId;\n          })\n        });\n      }\n    default:\n      return state;\n  }\n};\nexport var follow = function follow(userId) {\n  return {\n    type: FOLLOW,\n    userId: userId\n  };\n};\nexport var unfollow = function unfollow(userId) {\n  return {\n    type: UNFOLLOW,\n    userId: userId\n  };\n};\nexport var setUsers = function setUsers(users) {\n  return {\n    type: SET_USERS,\n    users: users\n  };\n};\nexport var setCurrentPage = function setCurrentPage(currentPage) {\n  return {\n    type: SET_CURRENT_PAGE,\n    currentPage: currentPage\n  };\n};\nexport var setTotalUsersCount = function setTotalUsersCount(totalCount) {\n  return {\n    type: SET_TOTAL_USERS_COUNT,\n    totalCount: totalCount\n  };\n};\nexport var setIsFetching = function setIsFetching(isFetching) {\n  return {\n    type: SET_IS_FETCHING,\n    isFetching: isFetching\n  };\n};\nexport var setIsFollowing = function setIsFollowing(isFetching, userId) {\n  return {\n    type: SET_IS_FOLLOWING,\n    isFetching: isFetching,\n    userId: userId\n  };\n};\nexport var getUsers = function getUsers(currentPage, pageSize) {\n  return function (dispatch) {\n    dispatch(setIsFetching(true));\n    dispatch(c);\n    usersAPI.getUsers(currentPage, pageSize).then(function (data) {\n      dispatch(setUsers(data.items));\n      dispatch(setTotalUsersCount(data.totalCount));\n      dispatch(setIsFetching(false));\n    });\n  };\n};\nexport var FollowT = function FollowT(userId) {\n  return function (dispatch) {\n    dispatch(setIsFollowing(true, userId));\n    usersAPI.follow(userId).then(function (response) {\n      if (response.data.resultCode === 0) {\n        dispatch(follow(userId));\n      }\n      dispatch(setIsFollowing(false, userId));\n    });\n  };\n};\n_c = FollowT;\nexport var UnfollowT = function UnfollowT(userId) {\n  return function (dispatch) {\n    dispatch(setIsFollowing(true, userId));\n    usersAPI.unfollow(userId).then(function (response) {\n      if (response.data.resultCode === 0) {\n        dispatch(unfollow(userId));\n      }\n      dispatch(setIsFollowing(false, userId));\n    });\n  };\n};\n_c2 = UnfollowT;\nexport default usersReducer;\nvar _c, _c2;\n$RefreshReg$(_c, \"FollowT\");\n$RefreshReg$(_c2, \"UnfollowT\");","map":{"version":3,"names":["usersAPI","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","SET_IS_FETCHING","SET_IS_FOLLOWING","initialState","users","pageSize","totalUsersCount","currentPage","isFetching","followingProgress","usersReducer","state","arguments","length","undefined","action","type","_objectSpread","map","u","id","userId","followed","totalCount","concat","_toConsumableArray","filter","follow","unfollow","setUsers","setCurrentPage","setTotalUsersCount","setIsFetching","setIsFollowing","getUsers","dispatch","c","then","data","items","FollowT","response","resultCode","_c","UnfollowT","_c2","$RefreshReg$"],"sources":["/Users/jestex/Documents/React/Projects/01/my-app/src/redux/users-reducer.js"],"sourcesContent":["import { usersAPI } from \"../api/api\";\n\nconst FOLLOW = \"FOLLOW\";\nconst UNFOLLOW = \"UNFOLLOW\";\nconst SET_USERS = \"SET_USERS\";\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\nconst SET_TOTAL_USERS_COUNT = \"SET_TOTAL_USERS_COUNT\";\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\nconst SET_IS_FOLLOWING = \"SET_IS_FOLLOWING\";\n\nlet initialState = {\n  users: [],\n  pageSize: 4,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: false,\n  followingProgress: [],\n};\n\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FOLLOW:\n      return {\n        ...state,\n        users: state.users.map((u) => {\n          if (u.id === action.userId) {\n            return { ...u, followed: true };\n          }\n          return u;\n        }),\n      };\n    case UNFOLLOW:\n      return {\n        ...state,\n        users: state.users.map((u) => {\n          if (u.id === action.userId) {\n            return { ...u, followed: false };\n          }\n          return u;\n        }),\n      };\n    case SET_USERS: {\n      return { ...state, users: action.users };\n    }\n    case SET_CURRENT_PAGE: {\n      return { ...state, currentPage: action.currentPage };\n    }\n    case SET_TOTAL_USERS_COUNT: {\n      return { ...state, totalUsersCount: action.totalCount };\n    }\n    case SET_IS_FETCHING: {\n      return { ...state, isFetching: action.isFetching };\n    }\n    case SET_IS_FOLLOWING: {\n      return {\n        ...state,\n        followingProgress: action.isFetching\n          ? [...state.followingProgress, action.userId]\n          : state.followingProgress.filter((id) => id !== action.userId),\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nexport const follow = (userId) => ({ type: FOLLOW, userId });\nexport const unfollow = (userId) => ({ type: UNFOLLOW, userId });\nexport const setUsers = (users) => ({ type: SET_USERS, users });\nexport const setCurrentPage = (currentPage) => ({\n  type: SET_CURRENT_PAGE,\n  currentPage,\n});\nexport const setTotalUsersCount = (totalCount) => ({\n  type: SET_TOTAL_USERS_COUNT,\n  totalCount,\n});\nexport const setIsFetching = (isFetching) => ({\n  type: SET_IS_FETCHING,\n  isFetching,\n});\nexport const setIsFollowing = (isFetching, userId) => ({\n  type: SET_IS_FOLLOWING,\n  isFetching,\n  userId,\n});\n\nexport const getUsers = (currentPage, pageSize) => {\n  return (dispatch) => {\n    dispatch(setIsFetching(true));\n    dispatch(c)\n\n    usersAPI.getUsers(currentPage, pageSize).then((data) => {\n      dispatch(setUsers(data.items));\n      dispatch(setTotalUsersCount(data.totalCount));\n      dispatch(setIsFetching(false));\n    });\n  };\n};\n\nexport const FollowT = (userId) => {\n  return (dispatch) => {\n    dispatch(setIsFollowing(true, userId));\n    usersAPI.follow(userId).then((response) => {\n      if (response.data.resultCode === 0) {\n        dispatch(follow(userId));\n      }\n      dispatch(setIsFollowing(false, userId))\n    });\n  };\n};\n\nexport const UnfollowT = (userId) => {\n  return (dispatch) => {\n    dispatch(setIsFollowing(true, userId));\n    usersAPI.unfollow(userId).then((response) => {\n      if (response.data.resultCode === 0) {\n        dispatch(unfollow(userId));\n      }\n      dispatch(setIsFollowing(false, userId))\n    });\n  };\n};\n\n\n\nexport default usersReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}