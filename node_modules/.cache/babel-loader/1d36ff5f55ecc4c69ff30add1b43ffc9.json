{"ast":null,"code":"import _toConsumableArray from \"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { profileAPI } from \"../api/api\";\nvar ADD_POST = \"ADD-POST\";\nvar UPDATE_NEW_POST_TEXT = \"UPDATE-NEW-POST-TEXT\";\nvar SET_USER_PROFILE = \"SET_USER_PROFILE\";\nvar SET_IS_FETCHING = \"SET_IS_FETCHING\";\nvar initialState = {\n  posts: [{\n    id: 1,\n    message: \"Hi, how are you?\",\n    likesCount: 12\n  }, {\n    id: 2,\n    message: \"It's my first post\",\n    likesCount: 11\n  }],\n  newPostText: \"\",\n  profile: null,\n  isFetching: false\n};\nvar profileReducer = function profileReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_POST:\n      {\n        var newPost = {\n          id: 5,\n          message: state.newPostText,\n          likesCount: 0\n        };\n        return _objectSpread({}, state, {\n          posts: [].concat(_toConsumableArray(state.posts), [newPost]),\n          newPostText: \"\"\n        });\n      }\n    case UPDATE_NEW_POST_TEXT:\n      {\n        return _objectSpread({}, state, {\n          newPostText: action.newText\n        });\n      }\n    case SET_USER_PROFILE:\n      {\n        return _objectSpread({}, state, {\n          profile: action.profile\n        });\n      }\n    case SET_IS_FETCHING:\n      {\n        return _objectSpread({}, state, {\n          isFetching: action.isFetching\n        });\n      }\n    default:\n      return state;\n  }\n};\nexport var addPost = function addPost() {\n  return {\n    type: ADD_POST\n  };\n};\nexport var updateNewPostText = function updateNewPostText(text) {\n  return {\n    type: UPDATE_NEW_POST_TEXT,\n    newText: text\n  };\n};\nexport var setUserProfile = function setUserProfile(profile) {\n  return {\n    type: SET_USER_PROFILE,\n    profile: profile\n  };\n};\nexport var setIsFetching = function setIsFetching(isFetching) {\n  return {\n    type: SET_IS_FETCHING,\n    isFetching: isFetching\n  };\n};\nexport var setUser = function setUser(userId) {\n  return function (dispatch) {\n    dispatch(setIsFetching(true));\n    if (!userId) userId = 2;\n    profileAPI.setUser(userId).then(function (response) {\n      dispatch(setIsFetching(true));\n      dispatch(setUserProfile(response.data));\n    });\n  };\n};\nexport var updateUser = function updateUser(userId) {\n  return function (dispatch) {\n    dispatch(setIsFetching(true));\n    if (prevU !== userId) {\n      var _userId = 2;\n      profileAPI.setUser(_userId).then(function (response) {\n        dispatch(setIsFetching(false));\n        dispatch(setUserProfile(response.data));\n      });\n    }\n    ;\n  };\n};\nexport default profileReducer;","map":{"version":3,"names":["profileAPI","ADD_POST","UPDATE_NEW_POST_TEXT","SET_USER_PROFILE","SET_IS_FETCHING","initialState","posts","id","message","likesCount","newPostText","profile","isFetching","profileReducer","state","arguments","length","undefined","action","type","newPost","_objectSpread","concat","_toConsumableArray","newText","addPost","updateNewPostText","text","setUserProfile","setIsFetching","setUser","userId","dispatch","then","response","data","updateUser","prevU"],"sources":["/Users/jestex/Documents/React/Projects/01/my-app/src/redux/profile-reducer.js"],"sourcesContent":["import { profileAPI } from \"../api/api\";\r\n\r\nconst ADD_POST = \"ADD-POST\";\r\nconst UPDATE_NEW_POST_TEXT = \"UPDATE-NEW-POST-TEXT\";\r\nconst SET_USER_PROFILE = \"SET_USER_PROFILE\";\r\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\r\n\r\nlet initialState = {\r\n  posts: [\r\n    { id: 1, message: \"Hi, how are you?\", likesCount: 12 },\r\n    { id: 2, message: \"It's my first post\", likesCount: 11 },\r\n  ],\r\n  newPostText: \"\",\r\n  profile: null,\r\n  isFetching: false,\r\n};\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_POST: {\r\n      let newPost = {\r\n        id: 5,\r\n        message: state.newPostText,\r\n        likesCount: 0,\r\n      };\r\n      return {\r\n        ...state,\r\n        posts: [...state.posts, newPost],\r\n        newPostText: \"\",\r\n      };\r\n    }\r\n    case UPDATE_NEW_POST_TEXT: {\r\n      return {\r\n        ...state,\r\n        newPostText: action.newText,\r\n      };\r\n    }\r\n    case SET_USER_PROFILE: {\r\n      return {\r\n        ...state,\r\n        profile: action.profile,\r\n      };\r\n    }\r\n    case SET_IS_FETCHING: {\r\n      return { ...state, isFetching: action.isFetching };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const addPost = () => ({ type: ADD_POST });\r\nexport const updateNewPostText = (text) => ({\r\n  type: UPDATE_NEW_POST_TEXT,\r\n  newText: text,\r\n});\r\nexport const setUserProfile = (profile) => ({\r\n  type: SET_USER_PROFILE,\r\n  profile,\r\n});\r\nexport const setIsFetching = (isFetching) => ({\r\n  type: SET_IS_FETCHING,\r\n  isFetching,\r\n});\r\n\r\nexport const setUser = (userId) => {\r\n  return (dispatch) => {\r\n    dispatch(setIsFetching(true));\r\n    if (!userId) userId = 2;\r\n    profileAPI.setUser(userId).then((response) => {\r\n      dispatch(setIsFetching(true));\r\n      dispatch(setUserProfile(response.data));\r\n    });\r\n  };\r\n};\r\n\r\nexport const updateUser = (userId) => {\r\n    return (dispatch) => {\r\n        dispatch(setIsFetching(true))\r\n        if (prevU !== userId) {\r\n          let userId = 2;\r\n          profileAPI.setUser(userId).then((response) => {\r\n            dispatch(setIsFetching(false))\r\n            dispatch(setUserProfile(response.data))\r\n          });\r\n    };\r\n  };\r\n}\r\n\r\nexport default profileReducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}