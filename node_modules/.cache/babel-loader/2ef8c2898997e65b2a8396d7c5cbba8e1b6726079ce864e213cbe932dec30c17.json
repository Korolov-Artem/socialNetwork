{"ast":null,"code":"import _toConsumableArray from\"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/jestex/Documents/React/Projects/01/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{profileAPI}from\"../api/api\";var ADD_POST=\"ADD-POST\";var SET_USER_PROFILE=\"SET_USER_PROFILE\";var SET_IS_FETCHING=\"SET_IS_FETCHING\";var SET_STATUS=\"SET_STATUS\";var initialState={posts:[{id:1,message:\"Hi, how are you?\",likesCount:12},{id:2,message:\"It's my first post\",likesCount:11}],profile:null,isFetching:false,status:\"\"};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:{var newPost={id:5,message:action.newPostText,likesCount:0};return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[newPost]),newPostText:\"\"});}case SET_USER_PROFILE:{return _objectSpread(_objectSpread({},state),{},{profile:action.profile});}case SET_IS_FETCHING:{return _objectSpread(_objectSpread({},state),{},{isFetching:action.isFetching});}case SET_STATUS:{return _objectSpread(_objectSpread({},state),{},{status:action.status});}default:return state;}};export var addPost=function addPost(newPostText){return{type:ADD_POST,newPostText:newPostText};};export var setUserProfile=function setUserProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setIsFetching=function setIsFetching(isFetching){return{type:SET_IS_FETCHING,isFetching:isFetching};};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var getStatus=function getStatus(userId){return function(dispatch){if(!userId)userId=28322;profileAPI.getStatus(userId).then(function(response){dispatch(setStatus(response.data));});};};export var updateStatus=function updateStatus(status){return function(dispatch){profileAPI.updateStatus(status).then(function(response){if(response.data.resultCode===0){dispatch(setStatus(status));}});};};export var setUser=function setUser(userId){return function(dispatch){dispatch(setIsFetching(true));if(!userId)userId=28322;profileAPI.setUser(userId).then(function(response){dispatch(setIsFetching(false));dispatch(setUserProfile(response.data));});};};export var updateUser=function updateUser(userId,prevUserId){return function(dispatch){dispatch(setIsFetching(true));if(prevUserId!==userId){var _userId=28322;profileAPI.setUser(_userId).then(function(response){dispatch(setIsFetching(false));dispatch(setUserProfile(response.data));});}};};export default profileReducer;","map":{"version":3,"names":["profileAPI","ADD_POST","SET_USER_PROFILE","SET_IS_FETCHING","SET_STATUS","initialState","posts","id","message","likesCount","profile","isFetching","status","profileReducer","state","arguments","length","undefined","action","type","newPost","newPostText","_objectSpread","concat","_toConsumableArray","addPost","setUserProfile","setIsFetching","setStatus","getStatus","userId","dispatch","then","response","data","updateStatus","resultCode","setUser","updateUser","prevUserId"],"sources":["/Users/jestex/Documents/React/Projects/01/my-app/src/redux/profile-reducer.js"],"sourcesContent":["import { profileAPI } from \"../api/api\";\r\n\r\nconst ADD_POST = \"ADD-POST\";\r\nconst SET_USER_PROFILE = \"SET_USER_PROFILE\";\r\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\r\nconst SET_STATUS = \"SET_STATUS\";\r\n\r\nlet initialState = {\r\n  posts: [\r\n    { id: 1, message: \"Hi, how are you?\", likesCount: 12 },\r\n    { id: 2, message: \"It's my first post\", likesCount: 11 },\r\n  ],\r\n  profile: null,\r\n  isFetching: false,\r\n  status: \"\",\r\n};\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_POST: {\r\n      let newPost = {\r\n        id: 5,\r\n        message: action.newPostText,\r\n        likesCount: 0,\r\n      };\r\n      return {\r\n        ...state,\r\n        posts: [...state.posts, newPost],\r\n        newPostText: \"\",\r\n      };\r\n    }\r\n    case SET_USER_PROFILE: {\r\n      return {\r\n        ...state,\r\n        profile: action.profile,\r\n      };\r\n    }\r\n    case SET_IS_FETCHING: {\r\n      return { ...state, isFetching: action.isFetching };\r\n    }\r\n    case SET_STATUS: {\r\n      return { ...state, status: action.status };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const addPost = (newPostText) => ({ type: ADD_POST, newPostText });\r\n\r\nexport const setUserProfile = (profile) => ({\r\n  type: SET_USER_PROFILE,\r\n  profile,\r\n});\r\n\r\nexport const setIsFetching = (isFetching) => ({\r\n  type: SET_IS_FETCHING,\r\n  isFetching,\r\n});\r\n\r\nexport const setStatus = (status) => ({\r\n  type: SET_STATUS,\r\n  status,\r\n});\r\n\r\nexport const getStatus = (userId) => (dispatch) => {\r\n  if (!userId) userId = 28322;\r\n  profileAPI.getStatus(userId).then((response) => {\r\n    dispatch(setStatus(response.data));\r\n  });\r\n};\r\n\r\nexport const updateStatus = (status) => (dispatch) => {\r\n  profileAPI.updateStatus(status).then((response) => {\r\n    if (response.data.resultCode === 0) {\r\n      dispatch(setStatus(status));\r\n    }\r\n  });\r\n};\r\n\r\nexport const setUser = (userId) => {\r\n  return (dispatch) => {\r\n    dispatch(setIsFetching(true));\r\n    if (!userId) userId = 28322;\r\n    profileAPI.setUser(userId).then((response) => {\r\n      dispatch(setIsFetching(false));\r\n      dispatch(setUserProfile(response.data));\r\n    });\r\n  };\r\n};\r\n\r\nexport const updateUser = (userId, prevUserId) => {\r\n  return (dispatch) => {\r\n    dispatch(setIsFetching(true));\r\n    if (prevUserId !== userId) {\r\n      let userId = 28322;\r\n      profileAPI.setUser(userId).then((response) => {\r\n        dispatch(setIsFetching(false));\r\n        dispatch(setUserProfile(response.data));\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport default profileReducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}